{
    "name": "appmixer.activecampaign.deals.ListDeals",
    "author": "Camilo Manrique <camilo@client.io>",
    "icon": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjg4IiBoZWlnaHQ9IjI4OCIgdmlld0JveD0iMCAwIDI4OCAyODgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiPgo8cGF0aCBkPSJNMzUuOCAwSDI1MS44QzI3MS43IDAgMjg3LjggMTYuMSAyODcuOCAzNlYyNTJDMjg3LjggMjcxLjkgMjcxLjcgMjg4IDI1MS44IDI4OEgzNS44QzE1LjkgMjg4IC0wLjIwMDAxMiAyNzEuOSAtMC4yMDAwMTIgMjUyVjM2Qy0wLjIwMDAxMiAxNi4xIDE1LjkgMCAzNS44IDBaIiBmaWxsPSIjMzU2QUU2Ii8+CjxwYXRoIGQ9Ik0xNDYuNiAxNTAuN0MxNDkuMiAxNTAuNyAxNTEuOCAxNDkuNyAxNTQuNiAxNDcuNkMxNTcuOSAxNDUuMyAxNjAuOCAxNDMuNCAxNjAuOCAxNDMuNEwxNjEuOCAxNDIuN0wxNjAuOCAxNDJDMTYwLjQgMTQxLjcgMTE2LjkgMTExLjUgMTEyLjQgMTA4LjZDMTEwLjMgMTA3LjEgMTA3LjkgMTA2LjggMTA2IDEwNy43QzEwNC4yIDEwOC42IDEwMy4yIDExMC41IDEwMy4yIDExMi44VjEyMy4xTDEwMy42IDEyMy4zQzEwMy45IDEyMy41IDEzMy44IDE0NC4zIDEzOS42IDE0OC4yQzE0MiAxNDkuOSAxNDQuMyAxNTAuNyAxNDYuNiAxNTAuN1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yMDQuOSAxMzIuNkMyMDIuMyAxMzAuNyAxMDkgNjUuNiAxMDUgNjIuOEwxMDMuNyA2MS45Vjc3LjlDMTAzLjcgODMgMTA2LjQgODQuOSAxMDkuNyA4Ny4zQzEwOS43IDg3LjMgMTgxLjMgMTM3LjIgMTkwLjIgMTQzLjNDMTgxLjMgMTQ5LjUgMTEzLjkgMTk2LjIgMTA5LjYgMTk4LjlDMTA0LjUgMjAyLjMgMTA0IDIwNC41IDEwNCAyMDkuMVYyMjYuM0MxMDQgMjI2LjMgMjAyLjcgMTU1LjcgMjA0LjggMTU0LjFDMjA5LjMgMTUwLjcgMjEwLjMgMTQ2LjcgMjEwLjQgMTQzLjhWMTQyQzIxMC41IDEzOC40IDIwOC42IDEzNS4yIDIwNC45IDEzMi42WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMCI+CjxyZWN0IHdpZHRoPSIyODgiIGhlaWdodD0iMjg4IiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo=",
    "description": "List and filter deals.",
    "private": false,
    "auth": {
        "service": "appmixer:activecampaign"
    },
    "quota": {
        "manager": "appmixer:activecampaign",
        "resources": "requests",
        "scope": {
            "userId": "{{userId}}"
        }
    },
    "inPorts": [
        {
            "name": "in",
            "schema": {
                "type": "object",
                "properties": {
                    "limit": { "type": "string" },
                    "filter": { "type": "boolean" },
                    "search": { "type": "string" },
                    "stage": { "type": "string" },
                    "status": { "type": "string" }
                }
            },
            "inspector": {
                "inputs": {
                    "limit": {
                        "type": "number",
                        "label": "Limit",
                        "tooltip": "The maximum number of deals to fetch. If left blank, the limit will be 100.",
                        "defaultValue": 100,
                        "index": 1
                    },
                    "filter": {
                        "type": "toggle",
                        "label": "Filter contacts",
                        "tooltip": "If set to true, it allows setting several deal filters.",
                        "defaultValue": false,
                        "index": 2
                    },
                    "search": {
                        "when": { "eq": { "./filter": true }},
                        "type": "text",
                        "label": "Search",
                        "tooltip": "Filter deals that match the given value in the title, contact names or organization.",
                        "index": 3
                    },
                    "stage": {
                        "when": { "eq": { "./filter": true }},
                        "type": "select",
                        "label": "Stage",
                        "tooltip": "The deal's current stage.",
                        "index": 4,
                        "source": {
                            "url": "/component/appmixer/activecampaign/stages/ListStages?outPort=out",
                            "data": {
                                "transform": "./ListStages#dealStagesToSelectArray"
                            }
                        }
                    },
                    "status": {
                        "when": { "eq": { "./filter": true }},
                        "type": "select",
                        "label": "Status",
                        "tooltip": "Filter contacts by their status.",
                        "defaultValue": "0",
                        "options": [
                            { "label": "Open", "value": "0" },
                            { "label": "Won", "value": "1" },
                            { "label": "Lost", "value": "2" }
                        ],
                        "index": 5
                    }
                }
            }
        }
    ],
    "outPorts": [
        {
            "name": "deals",
            "options": [
                { "label": "Deals", "value": "deals" }
            ]
        }
    ]
}
