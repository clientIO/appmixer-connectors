{
    "name": "appmixer.plivo.sms.SendSMSAndWaitForReply",
    "author": "Tomáš Waldauf <tomas@client.io>",
    "icon": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAV9UlEQVR4nOydCbRcRZnH/4FAWB1UlkgQ2ZdBdhiQoEA1UMGQsO+YIjLKNoBwACXokQmLhG0cRolhGVIsEhZlEw6FdDEwYVhMgJFBFmU1sg1rQEkISTyV9z14PLqr7+2quvd29/c7552ck3fru9X9+t+3lq/+39CFCxeCYZjGLFZ2BximyrBAGMYDC4RhPLBAGMYDC4RhPLBAGMYDC4RhPLBAGMYDC4RhPLBAGMYDC4RhPLBAGMYDC4RhPLBAGMYDC4RhPLBAGMYDC4RhPLBAGMYDC4RhPLBAGMYDC4RhPLBAGMYDC4RhPLBAGMYDC4RhPLBAGMYDC4RhPLBAGMbD0FYXDBkypJieNEFouTiAgwAcCGBrACsD+CuApwHcBmCyVea1UjvJdDQ+A/chrdzdyxSI0HJTANcA2MhzmRPLBKvMRQV2LRih5TIANqCf1QAMB7AqfQEsC2AY/bsENXkfwDwAbwF4G8AbAF4E8BKAZwE8ZZV5p+SX1ZF0pECEll8DcBeA5TI2Occqc2ribrWF0HJJAFsB+DoA97o2AbCGe3sj3+plAI8CeBDAwwCmW2X+FvkeXUfHCURouYL7RgSwSs6m+1tlbkjUrVwILdcBMAbAWBLFsBK6MY/E4r5obrHKPF5CHypPJwrkHADfb6PpCwDWt8p8mKBbLRFarglAOaEC2LCMPrTgOQDXAbjaKvOHsjtTFTpKIDQpfwXASm2GGG2VuSNyt5oitHRPhgMAjAewY1H3jcBMAJMBXNvrwzCfBlquYpXAJgHicOwMILlAhJZfBHAkgGPbGApWgS0BXAbgfKHlJQB+apV5pexOVY0qCuTLge1Xi9SPhggtVwRwGoDvAlgm5b0Kws33TgFwvNByKoAzrTKzyu5UVaiiQL4Q2H7JSP34FELL5QCcCOAkAMunuEfJuKHiEW4OJbR0Q68zrDJvl92psqmiQCqF0NJNwg4BcAHtUXQ7SwE4gYTyQwCXWGXml92psuBUEw9Cy/UB3A3gqh4Rx0Dck/xiAA8JLTcruzNlwU+QBggtF6Oh1BmphmwdhJvMzxBaTgJwulVmXtkdKhJ+ggxCaLkaPTUmsTg+ZnEAEwA8QE/VnoEFMgCh5e4AHgewU9l9qSjuaTJTaHlg2R0pCh5ifTIRdxPSf02QH9VtLAvgWqHldgBOtMp8VHaHUtLzTxDKqr0RwEQWRy6OBXCH0PIfyu5ISnpaILQbbgHsXXZfOpRdaF6SdHO2THp2iEV/1LsqkFT4BoDH6EzHS/Tj/m8OgHcB9CcKDaWl189TtsDqANanszJlfkA3JJHUrDLPlNiPJPSkQCgV/Z6SPlhPATAA7gMwwyrzUmhAoeXKdNpyJ/rZIk5XM+Pex/uFlqLbUup7TiD05LizYHHMoM3GW60yL8QObpV5HcDt9ONe4wg6h3IIgJGx79eEFV1Xuk0kPSUQoeVwAP8FYO0CbueGR5cCuKLosxdWmb9QKvtkoeValFh5OH2IU+Li3yW03M4q83ziexVCz0zSKdnwzgLE8WfahV/NKnNy2QeTrDLPWWV+QHOWY2iOk5LhJJKQIwuVoScEQoewpgHYNOFt3iFhrGOVucAq837Ce+XGKvOBVeZiAOsCOBrA6wlv5+Z4twktl0p4j0LoCYFQJu7oRLEXALjIPZlIGKUc982K659VZjIJxb0vqTJ1t6EhZkfT9QIRWh4K4PhE4Z8A4Mbbx1tl3kp0jyRYZWZbZU6i1a9HEt3mUKHl9xLFLoSuFojQcgMAv0gUfhKALa0yDyWKXwhWmUcBbAvgbHoaxuY8snDqSLpWIELLpQHcQLlDMXFzjbFu4muVmRs5dilYZeZZZU4DMIo2KWMy1M3/OjUlpWsFAuAnAL4aOeYfAGxllbktctxKYJX5LRnc/T5y6NVpntZxdKVA6JF+XOSw02m+8WzkuJXCKvMibS7eFTn0OKHlnpFjJqcbBbIUgCsiZ+beDGBXq8y7EWNWFlqiHkMmczH5mdDyc5FjJqUbBbILJfHFwg2n9rPKfBAxZuWh5epDAPwyYtgRAM6MGC853SiQmK/pHgD7dvuhoGaQm8k4ALdGDHu00DL23DAZ3SiQWMwEsHvVN/5SQyI5CMD9kUIuDuD8SLGSwwJpzGsA9up1z9p+6H3Ym+qRxEAKLXeNFCspLJDPMo+GVX8uuyNVglLq9wQQa+9nYqQ4SWGBfJYJVpnpZXeiilhlHouYtrON0HJUpFjJYIF8mvsAXFh2J6qMVWYKrezF4KRIcZLBAvmE9wAcZpVJkY/UbXyH6iSGUhNabh4hTjJYIJ9werecgksNVRU+JVK42BkPUWGB9PEMgP8ouxMdxuUAfhchzv5V3l1ngfRxQq+ZModilVlIZRJCWYZ27CsJCwS4v8iaht2EVeb+fieVQFggFaajcoMqyI8jxBgptFw9Qpzo9LpAHiMTN6ZNrDIzyb41lH0ixIhOrwvkQhpLM2H8e4QYYyLEiE4vC2Q2gF+V3Ykuwc1DQivjfr2Kq1mVEYjQcojQcj+qZFQE0zgZMQ6U8asDwwwF8I1IXYpGJQQitBS0pn49+TUVwdSC7tMrxDhYtWOEGFEpVSBCy5WFllcDqFN5r6J4HsCDBd6v6yGL1acCw/ATpB+h5WH0hpaxBn49T86T8JvA9psKLZeI1JcoFO7uLrRcAcAlAPYr+t4DuCFvA6ruuieAL7W4dC7ZA12f9Ry70HK9AbF9ZhMfAnjS9T+r96+o1daiw04jMsR+elG/6/X3ssRugAnM0F0SwMYJnR5zM2ThQv8X6ZAh8cxBhJbbkon0V6IFzc9zVplcDu9Cy1MBnJXTKeVFAKOtMk+0iH0igHPpKGpWZlFsr3+VqNWOoSXYPLFfBTDG1uszcrTpu19fvcd3AIQ8Bb5tlbkioH1ufBoobIgltPwWgHtLFofj2jwXCy1Hky1n3m8K9zp/7Rsy0OLEBTk/wKDiPzcLLZvWcRe12kgAP2sj9vBFsWu1ZXK26z+a+7952w2iUnXYkwuElm/dB+zKihTmz+v1dFTAvdzQSXh+f2RA7DXJKrQZRwTEHhGwcTcz4L7oKYFQXY6pAE5NeZ8cPN1GebDQZed1PL8LLeazlud3oR80X799/F/gfaXQ8kKh5ZcD40QhmUDo8X8N+SpVgQXkuJiXYYH39Y3H8w5/8pCy3z6eDrzv0pRG/6zQ8gqh5RqB8YJIIhB6clwP4IAU8TMyj7ycJgHYDcAKVplJJfanV/hjpDhOoIu2AoSWk8pyh4++zOvmHLSMu0fs2C2YA+ABMl64F8BDnEpSCrOoalWsp+MwOt47Xmh5nFVmWqS4mUixD+Im5N9OELcRLwO4CcAdAO7pNf/cKmKV+UhoOSvBauVKAK4VWh4I4EirzKuR4zckqkCElgrAD2LGbMB8clt384k7KVGOqRYvJFzOdyOT7YWWB1tlYpdo+AzRBCK03DJhuTPQnMKJ4jyrzJ8S3ocJxwlkh4Txv+i+HIWWEwFMTGnVFGWSLrR0Hf411eZIgYu9nlXmCBZHR/BCAfcYQsd9b6Qd/CTEWsW6mMpsxeY5Klyzj1WmiDe9EaGlD3xDwJQJk6EuLSHfykX+rfYCcLfQcsUUwYMFIrQ8CMD+cbrzKaYC2Izq5pVJ6B/bZ4IdapD9sud3oU7sLwW0LfrL7GsApgstV4odOEggQsvh9PSIyVwA37LKjLfKtJtVGpNrAtq+DsAn8JDYb7YwnLg6IPbsQP/dMp726wOwsUUS+gQ5F8AKkfoC+kDtaJUJ+ePGZmqbpw/fB3CAVeavzS6wylzX5sLG3wAc4quZaOv1m9s0U5izKHa9/mYbbfuZBeAM+nsWyVdJJNE+k22nuwstt4tYdcjxFxJHJSfhQsvd6cxGq7HufDqzMSVrjREqA7BvxthPA7gk65xM1Go709mbVVpcuoAsWC+19XqUSr6UbuTufSyAbWLEzEgdwG5Z3TJ9GmhLILRbPgPAFlk6kAE3Xt65quJgwqFtACeUAyPkiWXBfYlkymhOIZA9aQc7Bm+4bxerzHOR4jEVhuYIhwM4hs61pOQoq0zLIWxUgdDT4xEAm+XpaRPchLxGHq9MDyG0HErFQU8FsGGi27j51NZWGW8KfuwThXtEEofjCBZHb2KV+cgqcxVNrL9DhVNjsxSAaULLpdsN0I5ATmz3ZoO41ioTajbGdDhWmQVWmcsAbBDBfK4RG4UYbOcaYlEB+Lwn8hrhJuWbWGVmR4jFdBFCy7EklJjbBx8B2KLZadJocxCh5eTAc9T97GGVuTVCnMIg2x83vFy1xaUpbX/mkpdYXtufvWhCnNr2JwpCy7UB3ELf/rF4AMDIRn5oUQQitBxGGz+hBsO3W2V2D4xRKELLCVRHhG1/CoI2+24DsH3EsPtaZT5jWB5rkr5rBHG4npwcGKNQyPYnrycW6DzETS1sf2oBtj+30JdW49i12vYBtj+3tGP7ExOrzDsAJIB7IoY9g1bPMpNHIDESEt2w48kIcYokxPZn3Ra2PyHWPGvQB6gZIUNhN4wcG9A+CnRkegxtSsdgQwCH5mmQSSCkuhhv2MQIMYqmU21/Qvsd2rcoUC7bmAiZz/2cRHt5mcj6BNk6wvDKkgN4p8G2PyVD58/3jnDGBTTx3znrxVkFUmu/Px8zJUIMpkexyrhh1g8jhTs+64VZBRJa2ORdMlpgmBDOB/BQhDi7CS1bufQvoqVAaLwWmqp8h1Xmw8AYTI9D5gxHtTjGnIXFsi46ZXmCuIngcoEdCjmdxjAfY5V5NPC0ZD8HZ7koi0A2Ce+L99gpw+Tl9AgT9n/KMszKIpCNAzvyrFXmjcAYDPMxdJryxgihdml1QRaBhNrQPxzYvmx61fan6o6VF0WIUQmBhNaLKJuUtj8h1jpIbPsTa2MuCVaZByOUWtip1QVZBBJ6LPL5wPZlEzIhfK3F/Cuktngr25+rAmK/2yELK7nK6TVgRCuboCwCCfUZ6nSB6Ira/hzcwvbnlhJtf4oitOy0Y3PfL7NkNoamLBTtjRQVOj8wXmj5q4y2Px/RmY1Mtj9WmaOElu7DvE+GL6Nctj+2Xv+eqNV+k9H2Zz4Vv4lm+1MAjwJ4C8AXAmJsBqCpS3zL8yC1K0ctaCPVeyCrWmVeCWjPME0RWrqhYMj5oin1cXc2zXzOMsQKLZTORW2YlISWnfYuQhVWJ51hEuE9sZkBb1WCIgQS8/A9wwwmdKl8Zd8vswhkTmAHQvO4GMZHaK1C7yJUFoG8HdiB0INWDOPjncD23vLSWZZ53yQ7mnZZD8D/BLSvBGT7s2eG9yK/7U+tlt/2p17PY/uzN4ARnWL7k5OkKTFZBPIy2UO2y/oBbSuB0PI0qneRZ0VvotDymy1tf2q1dmx/JopabbSt11vZ/hwL4N9yxj5L1Gq7l237k4Ok8+gswUNzejYIbF8qVBckrycWaHXkJqqR0Th2rRZm+1OrtbL9uaiN2KtQ7GVztiuLpEP4LAIJLUuwdWD7sgmxz+lk258xAe2LxDuHyIB3qJpFIKE+ViNo/N6ppLTPYdufcEKrK3tTobIIJHSnElnSiisM2/5Um/UC23sP87UUCCXFhS71fjOwPcM0I7T4jneOnXUF4IHAToxKVeid6Xm2DWzvzYrOKpD/DuzEElS8kWGiQXX6Q0skeN0+swqkab58DsZHiMEwA4nh+OndS8oqkEcj1JDbQmjZ8pA8w+QgtOLA3FbZwJkEQqfqbg/sjOO0CDEYpr+cdOjiz0yrzFzfBXm26a8L7IxjB6HlDhHiFEmv2v4siNSPVIzLmCrl495WF+QRSD3S+fLzhZaddFArpe1PqLVOStuf0HMWyaD0ncwO7R7ubHVB5g+qVWZ+pDK9WwH4boQ4RXFNQNvXW9j+hMRuZfsTYlc0u+K2P+Mj+LW9nSXLPO83+aXt9+dTnCu0DH2BRTE1me1PvR5m+1Ov+2x/bu5G2x+h5bKR5rI3WWVaDp9zlYFGXwdvj7Qzfp8LR0+mykPFPPfKaPvzJFnzZBpCiVptFJ3Z8B7//JTtT72eaehHGcP7Z7T9eQbAZVW2/RFaTgJwSoRQo6wyi57A0eqk45PKrHdH6KDjbKsMr2wxmRBabgzgkQiT81kAvkL1RqKVgV6EVaYeqcqPY4LQMkb1XKbLoaHVtAjicFzeL45WtLua9KM22zXiyg5c+mWK5+cA/jFCnA/zzPvaEohV5rfun3baNmAYgFuFlqFl3pguRWh5AgAVKdxVVDU3EyH7ESdEPDD/OQB38ZOEGYzQ8hAq3hkD93k9J0+DtgVilfl9m0uUzXAiMTwnYfoRWh7mhuARjRnc3ONPeRqE3ngCrQjEwg23rhNanim0THnajqk4QstTAFwRURzvU23DXORe5h0M7Q/EqNMwmPsAHJp1L4HpDmi16ucR5xz9TLDK/KTRL6LugzRCaPmLQIeOZswG8H3adKt68hwTCO1zTIu0WjWQJwBsbpVpmMBZhECWAfC7BC+sHxf7RKvM9ETxmRKhp8aP3N84gVmE+2LdzirTdO8uuUDQ9yLXAzADwPKZGrTHvQDOtMrE2slnSoSycseROELte5ox0SrzY98FhQgEfS94LICbCiirMBPAf7oJvVWmkkl1THPIwONQemKkTFp1I46dWiUlFiYQ9L3449rMIm0HN6a8g35s3iU8pjjoBODOAA6gZNfUvluvAtgiS/m/QgWCvjfjPAAn5W4YzizKE3uSMlOfoSKP77sfq0wnuZZ3HELLFagejPtZk4zLNwAwMtAAPS9zKFM8k11VGQJxjS4O9IdlmHZwH+j9rTI3Zm4QM5s3C2TycHTknXaGycIxecTRimST6QEiOS/VPRhmEMdbZSbHDJhkiDUYoeWxAH7KVXWZRCwA8C/tiqPwOUgjhJZjAFwVoZ4DwwzkAwDjQoZVlRAI+kSyLu2ThPqpMgxoKXcvq8yDIUEKn6Q3wyrzR6o4FXWcyPQk0ym/KkgcrSj0CTIQoeVuAKYk3klluo/5VFD1zFiOOJUZYg1GaLk8Fcg8JnG1JaY7eBzAP1tlHo4ZtLIC6UdouRGVK2b3d6YR7wE4C8CFzVLWQ6i8QPoRWu5IT5SRhd2UqTJODJcDON0qE1p+oykdI5B+hJbfAHAygNFt1CdnOp85tCVwNtXITErHCaQfoeXaAA4ns+LhpXWEKYqXAFwGYIpVJkYlgUx0rED6IQMHN/zaD8BYAF8qu09MNN6mvbFfArinjKPVHS+QgVCm8KY0od8ewHYZDKWZ6jCHjlDfS+UbHijbwLyrBNIIoeXqADahmtluWLYGPWWccD4PYOmy+9hjzAbw/1TD5Hn6eZIKZj6RYiUqhCCBMEwvw9m1DOOBBcIwHlggDOOBBcIwHlggDOOBBcIwHlggDOOBBcIwHlggDOOBBcIwHlggDOOBBcIwHlggDOOBBcIwHlggDOOBBcIwHlggDOOBBcIwHlggDOOBBcIwHlggDOOBBcIwHlggDOOBBcIwHlggDOOBBcIwHlggDOPh7wEAAP//XqboDndWzmIAAAAASUVORK5CYII=",
    "description": "Send SMS text message through Plivo and wait for the reply.",
    "webhook": true,
    "private": false,
    "auth": {
        "service": "appmixer:plivo"
    },
    "outPorts": [
        {
            "name": "response",
            "options": [
                { "label": "To", "value": "To" },
                { "label": "From", "value": "From" },
                { "label": "TotalRate", "value": "TotalRate" },
                { "label": "Units", "value": "Units" },
                { "label": "Text", "value": "Text" },
                { "label": "TotalAmount", "value": "TotalAmount" },
                { "label": "Type", "value": "Type" },
                { "label": "MessageUUID", "value": "MessageUUID" }
            ]
        },
        {
            "name": "noResponse",
            "options": [
                { "label": "From", "value": "From" },
                { "label": "timeout", "value": "timeout" }
            ]
        }
    ],
    "inPorts": [
        {
            "name": "message",
            "schema": {
                "type": "object",
                "properties": {
                    "body": { "type": "string" },
                    "to": { "type": "string" },
                    "timeout": { "type": "number" }
                },
                "required": [ "to", "body" ]
            },
            "inspector": {
                "inputs": {
                    "body": {
                        "type": "text",
                        "index": 1,
                        "group": "transformation",
                        "label": "Text message",
                        "tooltip": "Text message that should be sent."
                    },
                    "to": {
                        "type": "text",
                        "index": 2,
                        "group": "transformation",
                        "label": "To number",
                        "tooltip": "The destination phone number. <br/><br/>Format with a '+' and country code e.g., +16175551212 (E.164 format)."
                    },
                    "timeout": {
                        "type": "number",
                        "index": 3,
                        "group": "transformation",
                        "label": "Timeout of response (minutes)",
                        "defaultValue": 5,
                        "tooltip": "The time span in minutes in which the users response will be considered as awaited response. If no response, or response outside timeout span, the component will send messafe to noResponse port"
                    }
                },
                "groups": {
                    "transformation": {
                        "label": "Transformation",
                        "index": 1
                    }
                }
            }
        }
    ],
    "properties": {
        "schema": {
            "properties": {
                "fromNumber": { "type": "string" }
            },
            "required": [
                "fromNumber"
            ]
        },
        "inspector": {
            "inputs": {
                "fromNumber": {
                    "type": "select",
                    "group": "transformation",
                    "label": "From number",
                    "tooltip": "Select Plivo phone number.",
                    "index": 1,
                    "source": {
                        "url": "/component/appmixer/plivo/numbers/ListFromNumbers?outPort=numbers",
                        "data": {
                            "messages": {
                                "in": { "services": "sms" }
                            },
                            "transform": "./ListFromNumbers#toSelectArray"
                        }
                    }
                }
            },
            "groups": {
                "config": {
                    "label": "Configuration",
                    "index": 1
                },
                "transformation": {
                    "label": "Transformation",
                    "index": 2
                }
            }
        }
    }
}
